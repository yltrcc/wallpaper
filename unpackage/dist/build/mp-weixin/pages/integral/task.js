(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/integral/task"],{2110:function(e,n,t){},5432:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return r}));var r={uNavbar:function(){return t.e("uview-ui/components/u-navbar/u-navbar").then(t.bind(null,"f970"))},uIcon:function(){return t.e("uview-ui/components/u-icon/u-icon").then(t.bind(null,"df57"))}},a=function(){var e=this,n=e.$createElement;e._self._c},u=[]},"61fc":function(e,n,t){"use strict";(function(e,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=u(t("a34a"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n,t,r,a,u,i){try{var o=e[u](i),s=o.value}catch(c){return void t(c)}o.done?n(s):Promise.resolve(s).then(r,a)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var u=e.apply(n,t);function i(e){o(u,r,a,i,s,"next",e)}function s(e){o(u,r,a,i,s,"throw",e)}i(void 0)}))}}var c={data:function(){return{userIntegral:0,signIntegral:0,inviteIntegral:0,adIntegral:0,chargeShow:!1,cashShow:!1,loadShow:!0}},onLoad:function(){var e=this;return s(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.getConfig();case 2:e.loadShow=!1;case 3:case"end":return n.stop()}}),n)})))()},onShow:function(){var e=this;return s(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.getUser();case 1:case"end":return n.stop()}}),n)})))()},methods:i({getUser:function(){var n=this;return s(a.default.mark((function t(){var r,u;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n,t.next=3,e.callFunction({name:"query_map",data:{dbName:"wx_user",id:r.vuex_user._id}});case 3:u=t.sent,r.userIntegral=u.result.integral;case 5:case"end":return t.stop()}}),t)})))()},getConfig:function(){var n=this;return s(a.default.mark((function t(){var r,u;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n,u={},t.next=4,e.callFunction({name:"config_map",data:{keys:["signIntegral","inviteIntegral","adIntegral","chargeShow","adUnitId"]}});case 4:u=t.sent,u.result.success&&(r.signIntegral=parseInt(u.result.data[0]),r.inviteIntegral=parseInt(u.result.data[1]),r.adIntegral=parseInt(u.result.data[2]),r.chargeShow=u.result.data[3],r.adUnitId=u.result.data[4]);case 6:case"end":return t.stop()}}),t)})))()},signClick:function(){var n=this;return s(a.default.mark((function t(){var u,i;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(u=n,u.vuex_user){t.next=4;break}return u.loginShow=!0,t.abrupt("return");case 4:if(!u.isSign){t.next=6;break}return t.abrupt("return");case 6:return r.showLoading({mask:!0,title:"签到中..."}),t.next=9,e.callFunction({name:"sign_add",data:{userId:u.vuex_user._id}});case 9:i=t.sent,r.hideLoading(),i.result.success?(u.getUser(),u.signTitle="<p style='font-weight: 550;font-size: 16px;'>签到成功</p><p style='padding-top: 10px;'>获得<span class='num'>"+i.result.integral+"</span>积分</p>",u.signShow=!0,u.isSign=!0):r.showToast({icon:"none",mask:!0,title:i.result.msg,duration:1500});case 12:case"end":return t.stop()}}),t)})))()},adClick:function(){var e=this;e.vuex_user?videoAd&&videoAd.show().catch((function(e){videoAd.load().then((function(){return videoAd.show()}))})):e.loginShow=!0},adLoad:function(){var e=this;wx.createRewardedVideoAd&&(videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-8b7aecba30b3f324"}),videoAd.onError((function(e){console.log("videoAd onError",e)})),videoAd.onClose((function(n){n&&n.isEnded||void 0===n?e.vuex_user&&e.userIntegral():console.log("中途退出")})))},charge:function(){r.navigateTo({url:"/pages/integral/charge"})},cash:function(){r.navigateTo({url:"/pages/integral/cash"})}},"adClick",(function(){var e=null;wx.createRewardedVideoAd&&(e=wx.createRewardedVideoAd({adUnitId:this.adUnitId}),e.onError((function(e){console.log("videoAd onError",res)})),e.onClose((function(e){e&&e.isEnded})))})),onShareAppMessage:function(e){return{title:"我等风也等你，近听水无声~",path:"/pages/index/index?userId="+this.vuex_user._id}}};n.default=c}).call(this,t("a9ff")["default"],t("543d")["default"])},"710b":function(e,n,t){"use strict";(function(e){t("acd6");r(t("66fd"));var n=r(t("9eff"));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])},"9eff":function(e,n,t){"use strict";t.r(n);var r=t("5432"),a=t("b040");for(var u in a)"default"!==u&&function(e){t.d(n,e,(function(){return a[e]}))}(u);t("bb8d");var i,o=t("f0c5"),s=Object(o["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);n["default"]=s.exports},b040:function(e,n,t){"use strict";t.r(n);var r=t("61fc"),a=t.n(r);for(var u in r)"default"!==u&&function(e){t.d(n,e,(function(){return r[e]}))}(u);n["default"]=a.a},bb8d:function(e,n,t){"use strict";var r=t("2110"),a=t.n(r);a.a}},[["710b","common/runtime","common/vendor"]]]);