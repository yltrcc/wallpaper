(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-find-design-design"],{"0bc1":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}));var i={uIcon:n("2200").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.loadShow,expression:"!loadShow"}]},[n("v-uni-view",{staticClass:"canvas"},[n("v-uni-canvas",{style:[{width:2*e.w+"px"},{height:2*e.h+"px"}],attrs:{"canvas-id":"firstCanvas",id:"firstCanvas"}})],1),n("v-uni-view",{},[n("v-uni-image",{staticStyle:{position:"absolute",top:"0",left:"0"},style:[{width:e.w+"px"},{height:e.h+"px"}],attrs:{src:e.canvasUrl,mode:"aspectFill"}}),n("v-uni-image",{staticStyle:{position:"absolute",top:"0",left:"0"},style:[{width:e.w+"px"},{height:e.w+"px"}],attrs:{src:e.designList[e.designCurrent].image}})],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.viewShow,expression:"!viewShow"}],staticClass:"mould"},[n("v-uni-view",{staticClass:"safe-area-inset-bottom"},[n("v-uni-scroll-view",{staticStyle:{height:"120rpx",padding:"15rpx 0"},attrs:{"scroll-x":!0}},[n("v-uni-view",{staticClass:"u-flex u-row-left u-col-center"},[n("v-uni-view",{},[e._v("ㅤ")]),e._l(e.designList,(function(t,i){return n("v-uni-view",{key:i,staticClass:"tab",class:e.designCurrent===i?"tab_active":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cheekClick(i)}}},[n("v-uni-image",{attrs:{src:t.image}}),1===t.mode?n("v-uni-view",{staticClass:"shoufei u-flex u-row-center u-col-center"},[n("v-uni-text",{staticClass:"u-font-13"},[e._v(e._s(e.designIntegral))]),e._v("积分")],1):e._e()],1)})),n("v-uni-view",{},[e._v("ㅤ")])],2)],1)],1)],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.viewShow,expression:"!viewShow"}],staticClass:"handle u-m-20"},[n("v-uni-view",{staticClass:"safe-area-inset-bottom"},[n("v-uni-view",{staticClass:"u-flex u-row-around u-col-center",staticStyle:{"background-color":"rgba(73, 69, 84, 0.3)","border-radius":"80rpx",padding:"10rpx 20rpx"}},[n("v-uni-view",{staticClass:"u-text-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.backClick.apply(void 0,arguments)}}},[n("u-icon",{attrs:{name:"/static/icon/back.png",size:"44"}}),n("v-uni-view",{staticClass:"u-font-13"},[e._v("返回")])],1),n("v-uni-view",{staticClass:"u-text-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseClick.apply(void 0,arguments)}}},[n("u-icon",{attrs:{name:"/static/icon/cate.png",size:"44"}}),n("v-uni-view",{staticClass:"u-font-13"},[e._v("相册")])],1),n("v-uni-view",{staticClass:"u-text-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.canvasCont.apply(void 0,arguments)}}},[n("u-icon",{attrs:{name:"/static/icon/duihuan.png",size:"44"}}),n("v-uni-view",{staticClass:"u-font-13"},[e._v("保存")])],1),n("v-uni-view",{staticClass:"u-text-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.viewCont.apply(void 0,arguments)}}},[n("u-icon",{attrs:{name:"/static/icon/view.png",size:"44"}}),n("v-uni-view",{staticClass:"u-font-13"},[e._v("预览")])],1),n("v-uni-view",{staticClass:"u-text-center",staticStyle:{position:"relative"}},[n("u-icon",{attrs:{name:"/static/icon/shares.png",size:"44"}}),n("v-uni-view",{staticClass:"u-font-13"},[e._v("分享")]),n("v-uni-button",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",opacity:"0"},attrs:{"open-type":"share"}})],1)],1)],1)],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.viewShow,expression:"viewShow"}],staticStyle:{position:"fixed",bottom:"160rpx",right:"20rpx","background-color":"rgba(0,0,0,0.3)",padding:"10rpx","border-radius":"12rpx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.viewCont.apply(void 0,arguments)}}},[n("v-uni-image",{staticStyle:{width:"60rpx",height:"60rpx",display:"block"},attrs:{src:"/static/icon/view.png"}})],1)],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.loadShow,expression:"loadShow"}],staticClass:"loading_page"},[n("v-uni-image",{attrs:{src:"/static/loading/loading.gif"}})],1),e.designShow?n("models",{attrs:{title:e.designTitle,btnText:"看广告领 "+e.adIntegral+" 积分",authorize:!1},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.designShow=!1},save:function(t){arguments[0]=t=e.$handleEvent(t),e.adClick.apply(void 0,arguments)}}}):e._e(),e.signShow?n("models",{attrs:{authorize:!1,title:e.signTitle,btnText:"知道了",closeText:" "},on:{save:function(t){arguments[0]=t=e.$handleEvent(t),e.signShow=!1}}}):e._e(),n("models",{directives:[{name:"show",rawName:"v-show",value:e.adShow,expression:"adShow"}],attrs:{authorize:!1,ad:!0,title:"已成功保存到相册，别忘了分享给朋友哦！",btnText:"分享给好友",closeText:"暂时不用"},on:{save:function(t){arguments[0]=t=e.$handleEvent(t),e.adShow=!1},close:function(t){arguments[0]=t=e.$handleEvent(t),e.adShow=!1}}})],1)},s=[]},2271:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.userModel[data-v-391888be]{z-index:9999999;position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0,0,0,.6)}.userModel .cont[data-v-391888be]{width:%?520?%;padding:0 0 %?50?% 0;background-color:#fff;border-radius:%?32?%}.userModel .cont uni-image[data-v-391888be]{width:%?128?%;height:%?128?%;margin-top:%?-60?%;margin-bottom:%?40?%}.userModel .cont .text[data-v-391888be]{line-height:%?46?%}.userModel .cont .btn[data-v-391888be]{position:relative;margin-top:%?50?%;color:#fff;width:60%;line-height:%?80?%;border-radius:%?80?%;background-image:-webkit-gradient(linear,left top,right bottom,from(#fce03d),to(#f8c93c));background-image:-webkit-linear-gradient(top left,#fce03d,#f8c93c);background-image:linear-gradient(to bottom right,#fce03d,#f8c93c)}.userModel .cont .no[data-v-391888be]{color:#b8b8b8}.num[data-v-391888be]{font-size:16px;font-weight:700;color:#f8c93c;padding:0 %?8?%}.adClass[data-v-391888be]{-webkit-animation:tiaobig-data-v-391888be 1.2s ease-in-out alternate infinite;animation:tiaobig-data-v-391888be 1.2s ease-in-out alternate infinite}@-webkit-keyframes tiaobig-data-v-391888be{25%{-webkit-transform:scale(.98);transform:scale(.98)}50%{-webkit-transform:scale(1.08);transform:scale(1.08)}75%{-webkit-transform:scale(.98);transform:scale(.98)}100%{-webkit-transform:scale(1.08);transform:scale(1.08)}}@keyframes tiaobig-data-v-391888be{25%{-webkit-transform:scale(.98);transform:scale(.98)}50%{-webkit-transform:scale(1.08);transform:scale(1.08)}75%{-webkit-transform:scale(.98);transform:scale(.98)}100%{-webkit-transform:scale(1.08);transform:scale(1.08)}}',""]),e.exports=t},3250:function(e,t,n){"use strict";n.r(t);var i=n("efa5"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=a.a},"32a2":function(e,t,n){"use strict";n.r(t);var i=n("0bc1"),a=n("9148");for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("36b0");var r,o=n("f0c5"),c=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"7b12dee9",null,!1,i["a"],r);t["default"]=c.exports},"36b0":function(e,t,n){"use strict";var i=n("b859"),a=n.n(i);a.a},5412:function(e,t,n){var i=n("2271");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("547a8e36",i,!0,{sourceMap:!1,shadowMode:!1})},"64f0":function(e,t,n){"use strict";n.r(t);var i=n("ef8c"),a=n("3250");for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("9be1");var r,o=n("f0c5"),c=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"391888be",null,!1,i["a"],r);t["default"]=c.exports},"86e8":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.canvas[data-v-7b12dee9]{position:absolute;top:%?-20000?%;left:%?-10000?%}.mould[data-v-7b12dee9]{position:fixed;bottom:0;left:0;min-height:%?150?%;width:100%;background-color:rgba(73,69,84,.3)}.tab[data-v-7b12dee9]{position:relative;width:%?116?%;height:%?116?%;border-radius:%?16?%;background-color:#fff;padding:%?10?%;margin-right:%?20?%;border:%?4?% solid #fff}.tab uni-image[data-v-7b12dee9]{width:%?78?%;height:%?78?%;border:%?6?% solid #000;border-radius:%?16?%;display:block}.tab_active[data-v-7b12dee9]{border:%?4?% solid #ffcc13}.handle[data-v-7b12dee9]{position:fixed;bottom:%?150?%;left:0;width:calc(100% - %?40?%);min-height:%?120?%;color:#fff}.shoufei[data-v-7b12dee9]{position:absolute;top:2px;left:0;width:100%;height:100%;font-size:8px;font-weight:700;color:#ffc001}',""]),e.exports=t},9148:function(e,t,n){"use strict";n.r(t);var i=n("bb67"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=a.a},"9be1":function(e,t,n){"use strict";var i=n("5412"),a=n.n(i);a.a},b859:function(e,t,n){var i=n("86e8");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("6a5bbf16",i,!0,{sourceMap:!1,shadowMode:!1})},bb67:function(e,t,n){"use strict";(function(e){var i=n("4ea4");n("e25e"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var a=i(n("1da1")),s=i(n("64f0")),r=null,o=null,c=uni.getSystemInfoSync(),u={components:{models:s.default},data:function(){return{w:c.screenWidth,h:c.screenHeight,loadShow:!0,adIntegral:0,signShow:!1,signTitle:"",designIntegral:0,designShow:!1,designTitle:"",adShow:!1,canvasUrl:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-7883b0be-568b-405c-83d4-6d4fe8b4df7d/9e2eacac-e3b0-4ac8-8752-d864f1d19ae9.jpg",saveUrl:"",designList:[],designCurrent:0,viewShow:!1}},onReady:function(){var e=this;o=uni.createCanvasContext("firstCanvas"),o.width=2*e.w,o.height=2*e.h},onLoad:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,t.next=3,n.getDesign();case 3:return t.next=5,n.getConfig();case 5:n.adLoad(),n.loadShow=!1;case 7:case"end":return t.stop()}}),t)})))()},methods:{getDesign:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t,n.next=3,e.callFunction({name:"query_list",data:{dbName:"wx_design",order:{name:"time",type:"asc"},pageIndex:1,pageSize:200}});case 3:a=n.sent,i.designList=a.result.data;case 5:case"end":return n.stop()}}),n)})))()},getConfig:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t,n.next=3,e.callFunction({name:"config_map",data:{keys:["designIntegral","adIntegral"]}});case 3:a=n.sent,a.result.success&&(i.designIntegral=parseInt(a.result.data[0]),i.adIntegral=parseInt(a.result.data[1]));case 5:case"end":return n.stop()}}),n)})))()},cheekClick:function(e){var t=this;t.designCurrent!==e&&(t.designCurrent=e)},chooseClick:function(){var e=this;uni.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(t){console.log(t),e.canvasUrl=t.tempFilePaths[0]}})},canvasCont:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var i,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t,!(i.designIntegral>0&&1===i.designList[i.designCurrent].mode)){n.next=15;break}if(a=i.vuex_user.integral,!(a<i.designIntegral)){n.next=7;break}return i.designShow=!0,i.designTitle="<p style='font-weight: 550;font-size: 16px;'>下载需要 "+i.designIntegral+" 积分</p><p style='padding-top: 10px;'>您当前仅有<span class='num'>"+a+"</span>积分，不足以下载当前刘海壁纸~</p>",n.abrupt("return");case 7:return uni.showLoading({mask:!0,title:"保存中..."}),n.next=10,e.callFunction({name:"place_design",data:{userId:i.vuex_user._id}});case 10:if(s=n.sent,s.result.success){n.next=14;break}return uni.showToast({mask:!0,icon:"none",title:s.result.msg,duration:1e3}),n.abrupt("return");case 14:i.getUser();case 15:uni.showLoading({mask:!0,title:"保存中..."}),uni.getImageInfo({src:i.canvasUrl,success:function(e){var t=i.imageUtil(e.width,e.height),n=e.path;uni.downloadFile({url:i.designList[i.designCurrent].image,success:function(e){var a=e.tempFilePath;o.drawImage(n,2*t.x,2*t.y,2*t.width,2*t.height),o.drawImage(a,0,0,2*i.w,2*i.w),o.draw(),setTimeout((function(){uni.canvasToTempFilePath({fileType:"jpg",canvasId:"firstCanvas",success:function(e){i.saveImage(e.tempFilePath)}})}),300)}})}});case 17:case"end":return n.stop()}}),n)})))()},saveImage:function(e){var t=this;uni.saveImageToPhotosAlbum({filePath:e,success:function(e){uni.hideLoading(),t.adShow=!0},fail:function(e){e.errMsg&&uni.showModal({title:"提示",content:"无权限，请打开下载权限后再试！",showCancel:!1,success:function(e){e.confirm&&uni.openSetting({success:function(e){e.authSetting["scope.writePhotosAlbum"]?uni.saveImageToPhotosAlbum({filePath:t.saveUrl,success:function(e){uni.hideLoading(),t.adShow=!0}}):uni.showModal({title:"温馨提示",content:"授权失败，请稍后重新获取",showCancel:!1})}})}}),uni.hideLoading()}})},adClick:function(){r&&r.show().catch((function(e){r.load().then((function(){return r.show()}))}))},adLoad:function(){var e=this;wx.createRewardedVideoAd&&(r.onError((function(e){console.log("videoAd onError",res)})),r.onClose((function(t){e.designShow=!1,t&&t.isEnded||void 0===t?e.vuex_user&&e.userIntegral():console.log("中途退出")})))},userIntegral:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t,uni.showLoading({mask:!0,title:"正在拼命加载中..."}),n.next=4,e.callFunction({name:"user_integral",data:{userId:i.vuex_user._id}});case 4:a=n.sent,uni.hideLoading(),a.result.success&&(i.getUser(),i.signTitle="<p style='font-weight: 550;font-size: 16px;'>观看成功</p><p style='padding-top: 10px;'>获得<span class='num'>"+a.result.integral+"</span>积分</p>",i.signShow=!0);case 7:case"end":return n.stop()}}),n)})))()},getUser:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t,n.next=3,e.callFunction({name:"query_map",data:{dbName:"wx_user",id:i.vuex_user._id}});case 3:a=n.sent,i.$u.vuex("vuex_user",a.result);case 5:case"end":return n.stop()}}),n)})))()},backClick:function(){uni.navigateBack()},viewCont:function(){var e=this;e.viewShow=!e.viewShow},imageUtil:function(e,t){var n=this,i=0,a=0,s={},r=0,o=0,c=t/e,u=n.h/n.w;return c<u?(a=n.h,i=n.h*e/t):(i=n.w,a=n.w*t/e),i>n.w?(r=(i-n.w)/2,r=0-r,o=0):(o=(a-n.h)/2,o=0-o,r=0),s.x=r,s.y=o,s.width=i,s.height=a,s}},onShareAppMessage:function(e){var t=this;return t.adShow=!1,{title:"快来看看我设计的刘海壁纸~",path:"/pages/find/find?userId="+t.vuex_user._id}},onShareTimeline:function(e){return{title:"我等风也等你，近听水无声~",path:"/pages/index/index"}}};t.default=u}).call(this,n("a9ff")["default"])},c557:function(e,t,n){e.exports=n.p+"static/img/jinbi.ec5ef10f.png"},ef8c:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"userModel u-flex u-row-center u-col-center"},[i("v-uni-view",{staticClass:"cont u-flex-col u-col-center",style:{width:e.ad?"300px":"520rpx"}},[i("v-uni-image",{attrs:{src:n("c557")}}),i("v-uni-view",{staticClass:"text u-text-center u-content-color u-p-l-60 u-p-r-60",domProps:{innerHTML:e._s(e.title)}}),e.authorize?i("v-uni-view",{staticClass:"btn u-text-center",attrs:{"hover-class":"hover-class","hover-stay-time":"50"}},[e._v(e._s(e.btnText))]):e.ad?i("v-uni-view",{},[i("v-uni-view",{staticClass:"u-p-t-20",staticStyle:{width:"300px"}}),i("v-uni-view",{staticClass:"btn u-text-center adClass",staticStyle:{"margin-left":"20%","margin-top":"30rpx"},attrs:{"hover-class":"hover-class","hover-stay-time":"50"}},[e._v(e._s(e.btnText)),i("v-uni-button",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",opacity:"0"},attrs:{"open-type":"share"}})],1)],1):i("v-uni-view",{staticClass:"btn u-text-center",attrs:{"hover-class":"hover-class","hover-stay-time":"50"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save.apply(void 0,arguments)}}},[e._v(e._s(e.btnText))])," "!=e.closeText?i("v-uni-view",{staticClass:"no u-text-center u-p-t-30",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}},[e._v(e._s(e.closeText))]):e._e()],1)],1)],1)},s=[]},efa5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"model",props:{title:{type:String,default:"为了更好的浏览体验，快去授权登录吧"},authorize:{type:Boolean,default:!0},ad:{type:Boolean,default:!1},btnText:{type:String,default:"授权登录"},closeText:{type:String,default:"暂时不用"}},data:function(){return{}},methods:{save:function(){this.$emit("save")},close:function(){this.$emit("close")},getUserProfile:function(e){this.$emit("getUserInfo")}}};t.default=i}}]);