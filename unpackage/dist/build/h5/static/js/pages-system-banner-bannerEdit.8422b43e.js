(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-system-banner-bannerEdit"],{1939:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}));var r={uForm:n("5571").default,uUpload:n("5b01").default,uFormItem:n("8a84").default,uRadioGroup:n("766e").default,uRadio:n("76aa").default,uInput:n("76d4").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return 1==e.vuex_user.system?n("v-uni-view",[n("v-uni-view",{staticClass:"u-p-40"},[n("u-form",{ref:"uForm",attrs:{model:e.banner}},[n("v-uni-view",{staticClass:"u-p-b-20 u-flex u-row-left u-col-top"},[n("u-upload",{ref:"uUpload",attrs:{action:"","max-count":"1","file-list":"-1"!=e.bannerId?e.imgList:"","auto-upload":!1,uploadText:"上传图片",width:"400",height:"166",maxSize:204800,"show-progress":!1,"size-type":["compressed"],"source-type":["album"],multiple:!1,"del-icon":"close","del-bg-color":"#ff7c7c","del-color":"#FFFFFF",limitType:["png","jpg","jpeg"]}}),n("v-uni-view",{staticClass:"u-p-l-20 u-p-t-20"},[n("v-uni-view",{staticClass:"u-font-12"},[e._v("注意事项：")]),n("v-uni-view",{staticClass:"u-font-12 u-tips-color u-p-t-15"},[e._v("比例：750 x 314")]),n("v-uni-view",{staticClass:"u-font-12 u-tips-color u-p-t-15"},[e._v("大小：500kb")])],1)],1),n("v-uni-view",{staticStyle:{"border-bottom":"1rpx solid #F4F4F4","border-top":"1rpx solid #F4F4F4"}},[n("u-form-item",{attrs:{label:"类型","border-bottom":!1}},[n("u-radio-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.radioGroupChange.apply(void 0,arguments)}},model:{value:e.bannerType,callback:function(t){e.bannerType=t},expression:"bannerType"}},[n("u-radio",{attrs:{"active-color":"#fdc621",size:"50",name:0}},[e._v("链接")]),n("u-radio",{attrs:{"active-color":"#fdc621",size:"50",name:1}},[e._v("小程序")])],1)],1)],1),0===e.bannerType?n("v-uni-view",{staticStyle:{"border-bottom":"1rpx solid #F4F4F4","border-top":"1rpx solid #F4F4F4"}},[n("u-form-item",{attrs:{label:"链接","border-bottom":!1}},[n("u-input",{attrs:{type:"textarea",height:40,clearable:!1,placeholder:"跳转链接（不跳转填写/）"},model:{value:e.banner.url,callback:function(t){e.$set(e.banner,"url",t)},expression:"banner.url"}})],1)],1):e._e(),1===e.bannerType?n("v-uni-view",{staticStyle:{"border-bottom":"1rpx solid #F4F4F4","border-top":"1rpx solid #F4F4F4"}},[n("u-form-item",{attrs:{label:"appid","border-bottom":!1}},[n("u-input",{attrs:{type:"textarea",height:40,clearable:!1,placeholder:"小程序ID（不跳转填写/）"},model:{value:e.banner.appid,callback:function(t){e.$set(e.banner,"appid",t)},expression:"banner.appid"}})],1),n("u-form-item",{attrs:{label:"路径","border-bottom":!1}},[n("u-input",{attrs:{type:"textarea",height:40,clearable:!1,placeholder:"跳转路径（不跳转填写/）"},model:{value:e.banner.path,callback:function(t){e.$set(e.banner,"path",t)},expression:"banner.path"}})],1)],1):e._e(),n("v-uni-view",{staticStyle:{"border-bottom":"1rpx solid #F4F4F4","border-top":"1rpx solid #F4F4F4"}},[n("u-form-item",{attrs:{label:"排序","border-bottom":!1}},[n("u-input",{attrs:{type:"number",height:40,clearable:!1,placeholder:"排序，数字越大越靠前"},model:{value:e.banner.sort,callback:function(t){e.$set(e.banner,"sort",t)},expression:"banner.sort"}})],1)],1)],1),n("v-uni-view",{staticClass:"u-p-t-40"},[n("v-uni-view",{staticClass:"btn",attrs:{"hover-class":"hover-class","hover-stay-time":"50"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("发 布")])],1)],1)],1):e._e()},i=[]},"294b":function(e,t,n){var r=n("3f28");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("4f06").default;a("4bd62dcb",r,!0,{sourceMap:!1,shadowMode:!1})},"348e":function(e,t,n){var r=n("ca60");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("4f06").default;a("98df54d4",r,!0,{sourceMap:!1,shadowMode:!1})},"3f28":function(e,t,n){var r=n("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.u-input[data-v-5c361d36]{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row\n}.u-input__input[data-v-5c361d36]{font-size:%?28?%;color:#303133;-webkit-box-flex:1;-webkit-flex:1;flex:1}.u-input__textarea[data-v-5c361d36]{width:auto;font-size:%?28?%;color:#303133;padding:%?10?% 0;line-height:normal;-webkit-box-flex:1;-webkit-flex:1;flex:1}.u-input--border[data-v-5c361d36]{border-radius:%?6?%;border-radius:4px;border:1px solid #dcdfe6}.u-input--error[data-v-5c361d36]{border-color:#fa3534!important}.u-input__right-icon__item[data-v-5c361d36]{margin-left:%?10?%}.u-input__right-icon--select[data-v-5c361d36]{-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s}.u-input__right-icon--select--reverse[data-v-5c361d36]{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}',""]),e.exports=t},"465d":function(e,t,n){"use strict";(function(e){var r=n("4ea4");n("baa5"),n("4e82"),n("e25e"),n("ac1f"),n("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var a=r(n("1da1")),i={data:function(){return{iconStyle:{fontSize:"12px",color:"#D8D8D8"},customStyle:{backgroundImage:"linear-gradient(to right, #FCEF59 , #F8D246)",color:"#333333"},bannerId:"",bannerType:0,banner:{},newBanner:{},imgList:[]}},onLoad:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.id,a=t,a.bannerId=r,"-1"!=r&&a.getBanner(r);case 4:case"end":return n.stop()}}),n)})))()},methods:{getBanner:function(t){var n=this;return(0,a.default)(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.callFunction({name:"query_map",data:{dbName:"wx_banner",id:t}});case 2:a=r.sent,n.imgList.push({url:a.result.image}),delete a.result._id,n.banner=a.result,n.bannerType=a.result.type?a.result.type:0,console.log(n.bannerType),n.newBanner=JSON.stringify(a.result);case 9:case"end":return r.stop()}}),r)})))()},submit:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var r,i,o,u,l,s,c,d,p,f,b,h,m,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t,i=r.$refs.uUpload.lists,0!==i.length){n.next=5;break}return r.$u.toast("请上传轮播图"),n.abrupt("return");case 5:if(0!==r.bannerType||r.banner.url){n.next=8;break}return r.$u.toast("请填写跳转路径"),n.abrupt("return");case 8:if(!(1===r.bannerType&&!r.banner.appid|!r.banner.path)){n.next=11;break}return r.$u.toast("请填写完整小程序跳转路径"),n.abrupt("return");case 11:if(r.banner.sort){n.next=14;break}return r.$u.toast("请填写轮播图排序"),n.abrupt("return");case 14:if("-1"==r.bannerId||!r.imgList[0]||i[0].url!==r.imgList[0].url||JSON.stringify(r.banner)!==r.newBanner){n.next=17;break}return r.$u.toast("请修改内容后再提交"),n.abrupt("return");case 17:if(uni.showLoading({mask:!0,title:"正在拼命加载中..."}),!("-1"==r.bannerId||i.length>0&&r.imgList[0]&&i[0].url!=r.imgList[0].url)){n.next=32;break}return o=i[0].url,u=o.substring(o.lastIndexOf(".")+1),l=String(1e5*Math.random()).split(".")[0],s=new Date,c=s.getFullYear(),d=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,p=s.getDate()<10?"0"+s.getDate():s.getDate(),f=s.getHours()<10?"0"+s.getHours():s.getHours(),b=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes(),h=s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds(),m="banner_"+c+d+p+f+b+h+"_"+l+"."+u,n.next=32,e.uploadFile({filePath:o,cloudPath:m}).then(function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(n),t.next=3,e.getTempFileURL({fileList:[n.fileID]}).then((function(e){console.log(e),e.fileList.length>0?r.banner.image=e.fileList[0].tempFileURL:r.$u.toast("图片上传失败")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 32:return r.banner.sort=parseInt(r.banner.sort),r.banner.type=parseInt(r.bannerType),n.next=36,e.callFunction({name:"query_edit",data:{dbName:"wx_banner",filter:{_id:r.bannerId},addData:r.banner,upData:r.banner}});case 36:g=n.sent,g.result.success&&(setTimeout((function(){uni.navigateBack()}),1e3),uni.setStorageSync("update_flag",1)),uni.showToast({icon:"none",title:g.result.msg,mask:!0,duration:1e3});case 39:case"end":return n.stop()}}),n)})))()},chooseImage:function(){var e=350,t=146,n=700,r=294;this.$u.route({url:"/uview-ui/components/u-avatar-cropper/u-avatar-cropper",params:{rectWidth:e,rectHeight:t,destWidth:n,destHeight:r,fileType:"jpg"}})},delImage:function(e){this.imgPath=""},radioGroupChange:function(e){this.bannerType=parseInt(e)}}};t.default=i}).call(this,n("a9ff")["default"])},"76d4":function(e,t,n){"use strict";n.r(t);var r=n("cdfb"),a=n("c049");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("d8d5");var o,u=n("f0c5"),l=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,"5c361d36",null,!1,r["a"],o);t["default"]=l.exports},"8ac6":function(e,t,n){"use strict";n.r(t);var r=n("465d"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"998b":function(e,t,n){"use strict";n.r(t);var r=n("1939"),a=n("8ac6");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("c0e6");var o,u=n("f0c5"),l=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,"3199d14c",null,!1,r["a"],o);t["default"]=l.exports},aa60:function(e,t,n){"use strict";var r=n("4ea4");n("a9e3"),n("498a"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("0e43")),i={name:"u-input",mixins:[a.default],props:{value:{type:[String,Number],default:""},type:{type:String,default:"text"},inputAlign:{type:String,default:"left"},placeholder:{type:String,default:"请输入内容"},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},placeholderStyle:{type:String,default:"color: #c0c4cc;"},confirmType:{type:String,default:"done"},customStyle:{type:Object,default:function(){return{}}},fixed:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},passwordIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!1},borderColor:{type:String,default:"#dcdfe6"},autoHeight:{type:Boolean,default:!0},selectOpen:{type:Boolean,default:!1},height:{type:[Number,String],default:""},clearable:{type:Boolean,default:!0},cursorSpacing:{type:[Number,String],default:0},selectionStart:{type:[Number,String],default:-1},selectionEnd:{type:[Number,String],default:-1},trim:{type:Boolean,default:!0},showConfirmbar:{type:Boolean,default:!0}},data:function(){return{defaultValue:this.value,inputHeight:70,textareaHeight:100,validateState:!1,focused:!1,showPassword:!1,lastValue:""}},watch:{value:function(e,t){this.defaultValue=e,e!=t&&"select"==this.type&&this.handleInput({detail:{value:e}})}},computed:{inputMaxlength:function(){return Number(this.maxlength)},getStyle:function(){var e={};return e.minHeight=this.height?this.height+"rpx":"textarea"==this.type?this.textareaHeight+"rpx":this.inputHeight+"rpx",e=Object.assign(e,this.customStyle),e},getCursorSpacing:function(){return Number(this.cursorSpacing)},uSelectionStart:function(){return String(this.selectionStart)},uSelectionEnd:function(){return String(this.selectionEnd)}},created:function(){this.$on("on-form-item-error",this.onFormItemError)},methods:{handleInput:function(e){var t=this,n=e.detail.value;this.trim&&(n=this.$u.trim(n)),this.$emit("input",n),this.defaultValue=n,setTimeout((function(){t.dispatch("u-form-item","on-form-change",n)}),40)},handleBlur:function(e){var t=this;setTimeout((function(){t.focused=!1}),100),this.$emit("blur",e.detail.value),setTimeout((function(){t.dispatch("u-form-item","on-form-blur",e.detail.value)}),40)},onFormItemError:function(e){this.validateState=e},onFocus:function(e){this.focused=!0,this.$emit("focus")},onConfirm:function(e){this.$emit("confirm",e.detail.value)},onClear:function(e){this.$emit("input","")},inputClick:function(){this.$emit("click")}}};t.default=i},c049:function(e,t,n){"use strict";n.r(t);var r=n("aa60"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},c0e6:function(e,t,n){"use strict";var r=n("348e"),a=n.n(r);a.a},ca60:function(e,t,n){var r=n("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.btn[data-v-3199d14c]{font-size:16px;background-image:-webkit-linear-gradient(350deg,#fcef59,#f8d319);background-image:linear-gradient(100deg,#fcef59,#f8d319);color:#333;border-radius:%?40?%;line-height:%?86?%;text-align:center}.hover-class[data-v-3199d14c]{-webkit-transform:scale(.92);transform:scale(.92);-webkit-transition:all .2s;transition:all .2s}.img[data-v-3199d14c]{position:relative}.img-bg[data-v-3199d14c]{width:%?400?%;height:%?167?%;background:#f4f5f6;border-radius:%?10?%;margin:%?10?%}.u-delete-icon[data-v-3199d14c]{position:absolute;top:%?20?%;right:%?20?%;z-index:10;background-color:hsla(0,0%,100%,.35);border-radius:%?100?%;width:%?44?%;height:%?44?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}',""]),e.exports=t},cdfb:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}));var r={uIcon:n("2200").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-input",class:{"u-input--border":e.border,"u-input--error":e.validateState},style:{padding:"0 "+(e.border?20:0)+"rpx",borderColor:e.borderColor,textAlign:e.inputAlign},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.inputClick.apply(void 0,arguments)}}},["textarea"==e.type?n("v-uni-textarea",{staticClass:"u-input__input u-input__textarea",style:[e.getStyle],attrs:{value:e.defaultValue,placeholder:e.placeholder,placeholderStyle:e.placeholderStyle,disabled:e.disabled,maxlength:e.inputMaxlength,fixed:e.fixed,focus:e.focus,autoHeight:e.autoHeight,"selection-end":e.uSelectionEnd,"selection-start":e.uSelectionStart,"cursor-spacing":e.getCursorSpacing,"show-confirm-bar":e.showConfirmbar},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.handleInput.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.handleBlur.apply(void 0,arguments)},focus:function(t){arguments[0]=t=e.$handleEvent(t),e.onFocus.apply(void 0,arguments)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm.apply(void 0,arguments)}}}):n("v-uni-input",{staticClass:"u-input__input",style:[e.getStyle],attrs:{type:"password"==e.type?"text":e.type,value:e.defaultValue,password:"password"==e.type&&!e.showPassword,placeholder:e.placeholder,placeholderStyle:e.placeholderStyle,disabled:e.disabled||"select"===e.type,maxlength:e.inputMaxlength,focus:e.focus,confirmType:e.confirmType,"cursor-spacing":e.getCursorSpacing,"selection-end":e.uSelectionEnd,"selection-start":e.uSelectionStart,"show-confirm-bar":e.showConfirmbar},on:{focus:function(t){arguments[0]=t=e.$handleEvent(t),e.onFocus.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.handleBlur.apply(void 0,arguments)},input:function(t){arguments[0]=t=e.$handleEvent(t),e.handleInput.apply(void 0,arguments)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"u-input__right-icon u-flex"},[e.clearable&&""!=e.value&&e.focused?n("v-uni-view",{staticClass:"u-input__right-icon__clear u-input__right-icon__item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClear.apply(void 0,arguments)}}},[n("u-icon",{attrs:{size:"32",name:"close-circle-fill",color:"#c0c4cc"}})],1):e._e(),e.passwordIcon&&"password"==e.type?n("v-uni-view",{staticClass:"u-input__right-icon__clear u-input__right-icon__item"},[n("u-icon",{attrs:{size:"32",name:e.showPassword?"eye-fill":"eye",color:"#c0c4cc"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showPassword=!e.showPassword}}})],1):e._e(),"select"==e.type?n("v-uni-view",{staticClass:"u-input__right-icon--select u-input__right-icon__item",class:{"u-input__right-icon--select--reverse":e.selectOpen}},[n("u-icon",{attrs:{name:"arrow-down-fill",size:"26",color:"#c0c4cc"}})],1):e._e()],1)],1)},i=[]},d8d5:function(e,t,n){"use strict";var r=n("294b"),a=n.n(r);a.a}}]);